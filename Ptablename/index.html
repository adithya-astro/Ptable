<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Periodic Table Name</title>
    <script src="https://cdnjs.cloudflare.com/ajax/libs/html2canvas/1.4.1/html2canvas.min.js"></script>
    <script src="https://cdnjs.cloudflare.com/ajax/libs/jspdf/2.5.1/jspdf.umd.min.js"></script>
    <style>
        body, html {
            height: 100%;
            margin: 0;
            font-family: sans-serif;
            display: flex;
            flex-direction: column;
            align-items: center;
            justify-content: center;
            background-color: #f0f0f0;
        }
        #container {
            position: relative; /* This is the positioning context for the elements */
            margin-bottom: 20px;
            /* The container will size itself based on the image */
        }
        #background-img {
            display: block;
            max-width: 80vw; /* Limit image size to be viewable */
            max-height: 70vh;
        }
        #name-display {
            position: absolute;
            top: 50%; /* Center vertically */
            left: 30%; /* Center horizontally */
            transform: translate(-50%, -50%);
            width: 60%; /* Adjust this width to fit the 'black space' */
            background-color: transparent;
            padding: 10px;
            border-radius: 10px;
            display: flex;
            gap: 10px;
            flex-wrap: wrap;
            justify-content: center;
        }
        .element {
            position: relative;
            text-align: center;
            border-radius: 8px;
            color: white;
            font-family: Arial, sans-serif;
            display: flex;
            flex-direction: column;
            justify-content: space-between; /* Evenly space content vertically */
            align-items: center;
            padding: 5px;
            box-shadow: 2px 2px 5px rgba(0,0,0,0.2);
            box-sizing: border-box;
        }
        .element-top-row {
            width: 100%;
            display: flex;
            justify-content: space-between;
        }
        .symbol {
            font-size: 48px;
            font-weight: bold;
            line-height: 1; /* Keep line height tight */
        }
        .element-name {
            font-size: 14px;
            font-weight: bold;
        }
        .atomic-number {
            font-size: 16px;
            font-weight: bold;
        }
        .mass-number {
            font-size: 16px;
            font-weight: bold;
        }
        /* New class for fallback elements (non-periodic table letters) */
        .fallback-element {
            display: flex;
            flex-direction: column;
            justify-content: center;
            align-items: center;
            gap: 5px;
        }
        .fallback-symbol {
            font-size: 48px;
            font-weight: bold;
            line-height: 1;
        }
        .fallback-name {
            font-size: 14px;
            font-weight: bold;
        }

        #controls {
            display: flex;
            gap: 10px;
        }
        input[type="text"] {
            padding: 10px;
            font-size: 16px;
            border: 1px solid #ccc;
            border-radius: 5px;
        }
        button {
            padding: 10px 20px;
            font-size: 16px;
            border: none;
            background-color: #4CAF50;
            color: white;
            border-radius: 5px;
            cursor: pointer;
        }
        button:hover {
            background-color: #45a049;
        }
    </style>
</head>
<body>

    <div id="container">
        <img id="background-img" src="drawing.jpg" alt="Drawing" />
        <div id="name-display"></div>
    </div>

    <div id="controls">
        <input type="text" id="name-input" placeholder="Enter your name">
        <button onclick="generatePeriodicName()">Generate</button>
        <button onclick="downloadPDF()">Download as PDF</button>
    </div>

    <script>
        const { jsPDF } = window.jspdf;

        function downloadPDF() {
            const capture = document.querySelector('#container');
            // Use a higher scale to improve resolution
            html2canvas(capture, { scale: 2 }).then(canvas => {
                const imgData = canvas.toDataURL('image/png');
                const doc = new jsPDF({
                    orientation: 'landscape',
                    unit: 'px',
                    format: [canvas.width, canvas.height]
                });
                doc.addImage(imgData, 'PNG', 0, 0, canvas.width, canvas.height);
                doc.save('periodic-name.pdf');
            });
        }

        const periodicTable = {
            'h': { name: 'Hydrogen', number: 1, mass: 1 }, 'he': { name: 'Helium', number: 2, mass: 4 }, 
            'li': { name: 'Lithium', number: 3, mass: 7 }, 'be': { name: 'Beryllium', number: 4, mass: 9 },
            'b': { name: 'Boron', number: 5, mass: 11 }, 'c': { name: 'Carbon', number: 6, mass: 12 },
            'n': { name: 'Nitrogen', number: 7, mass: 14 }, 'o': { name: 'Oxygen', number: 8, mass: 16 },
            'f': { name: 'Fluorine', number: 9, mass: 19 }, 'ne': { name: 'Neon', number: 10, mass: 20 },
            'na': { name: 'Sodium', number: 11, mass: 23 }, 'mg': { name: 'Magnesium', number: 12, mass: 24 },
            'al': { name: 'Aluminum', number: 13, mass: 27 }, 'si': { name: 'Silicon', number: 14, mass: 28 },
            'p': { name: 'Phosphorus', number: 15, mass: 31 }, 's': { name: 'Sulfur', number: 16, mass: 32 },
            'cl': { name: 'Chlorine', number: 17, mass: 35 }, 'ar': { name: 'Argon', number: 18, mass: 40 },
            'k': { name: 'Potassium', number: 19, mass: 39 }, 'ca': { name: 'Calcium', number: 20, mass: 40 },
            'sc': { name: 'Scandium', number: 21, mass: 45 }, 'ti': { name: 'Titanium', number: 22, mass: 48 },
            'v': { name: 'Vanadium', number: 23, mass: 51 }, 'cr': { name: 'Chromium', number: 24, mass: 52 },
            'mn': { name: 'Manganese', number: 25, mass: 55 }, 'fe': { name: 'Iron', number: 26, mass: 56 },
            'co': { name: 'Cobalt', number: 27, mass: 59 }, 'ni': { name: 'Nickel', number: 28, mass: 59 },
            'cu': { name: 'Copper', number: 29, mass: 64 }, 'zn': { name: 'Zinc', number: 30, mass: 65 },
            'ga': { name: 'Gallium', number: 31, mass: 70 }, 'ge': { name: 'Germanium', number: 32, mass: 73 },
            'as': { name: 'Arsenic', number: 33, mass: 75 }, 'se': { name: 'Selenium', number: 34, mass: 79 },
            'br': { name: 'Bromine', number: 35, mass: 80 }, 'kr': { name: 'Krypton', number: 36, mass: 84 },
            'rb': { name: 'Rubidium', number: 37, mass: 85 }, 'sr': { name: 'Strontium', number: 38, mass: 88 },
            'y': { name: 'Yttrium', number: 39, mass: 89 }, 'zr': { name: 'Zirconium', number: 40, mass: 91 },
            'nb': { name: 'Niobium', number: 41, mass: 93 }, 'mo': { name: 'Molybdenum', number: 42, mass: 96 },
            'tc': { name: 'Technetium', number: 43, mass: 98 }, 'ru': { name: 'Ruthenium', number: 44, mass: 101 },
            'rh': { name: 'Rhodium', number: 45, mass: 103 }, 'pd': { name: 'Palladium', number: 46, mass: 106 },
            'ag': { name: 'Silver', number: 47, mass: 108 }, 'cd': { name: 'Cadmium', number: 48, mass: 112 },
            'in': { name: 'Indium', number: 49, mass: 115 }, 'sn': { name: 'Tin', number: 50, mass: 119 },
            'sb': { name: 'Antimony', number: 51, mass: 122 }, 'te': { name: 'Tellurium', number: 52, mass: 128 },
            'i': { name: 'Iodine', number: 53, mass: 127 }, 'xe': { name: 'Xenon', number: 54, mass: 131 },
            'cs': { name: 'Caesium', number: 55, mass: 133 }, 'ba': { name: 'Barium', number: 56, mass: 137 },
            'la': { name: 'Lanthanum', number: 57, mass: 139 }, 'ce': { name: 'Cerium', number: 58, mass: 140 },
            'pr': { name: 'Praseodymium', number: 59, mass: 141 }, 'nd': { name: 'Neodymium', number: 60, mass: 144 },
            'pm': { name: 'Promethium', number: 61, mass: 145 }, 'sm': { name: 'Samarium', number: 62, mass: 150 },
            'eu': { name: 'Europium', number: 63, mass: 152 }, 'gd': { name: 'Gadolinium', number: 64, mass: 157 },
            'tb': { name: 'Terbium', number: 65, mass: 159 }, 'dy': { name: 'Dysprosium', number: 66, mass: 163 },
            'ho': { name: 'Holmium', number: 67, mass: 165 }, 'er': { name: 'Erbium', number: 68, mass: 167 },
            'tm': { name: 'Thulium', number: 69, mass: 169 }, 'yb': { name: 'Ytterbium', number: 70, mass: 173 },
            'lu': { name: 'Lutetium', number: 71, mass: 175 }, 'hf': { name: 'Hafnium', number: 72, mass: 178 },
            'ta': { name: 'Tantalum', number: 73, mass: 181 }, 'w': { name: 'Tungsten', number: 74, mass: 184 },
            're': { name: 'Rhenium', number: 75, mass: 186 }, 'os': { name: 'Osmium', number: 76, mass: 190 },
            'ir': { name: 'Iridium', number: 77, mass: 192 }, 'pt': { name: 'Platinum', number: 78, mass: 195 },
            'au': { name: 'Gold', number: 79, mass: 197 }, 'hg': { name: 'Mercury', number: 80, mass: 201 },
            'tl': { name: 'Thallium', number: 81, mass: 204 }, 'pb': { name: 'Lead', number: 82, mass: 207 },
            'bi': { name: 'Bismuth', number: 83, mass: 209 }, 'po': { name: 'Polonium', number: 84, mass: 209 },
            'at': { name: 'Astatine', number: 85, mass: 210 }, 'rn': { name: 'Radon', number: 86, mass: 222 },
            'fr': { name: 'Francium', number: 87, mass: 223 }, 'ra': { name: 'Radium', number: 88, mass: 226 },
            'ac': { name: 'Actinium', number: 89, mass: 227 }, 'th': { name: 'Thorium', number: 90, mass: 232 },
            'pa': { name: 'Protactinium', number: 91, mass: 231 }, 'u': { name: 'Uranium', number: 92, mass: 238 },
            'np': { name: 'Neptunium', number: 93, mass: 237 }, 'pu': { name: 'Plutonium', number: 94, mass: 244 },
            'am': { name: 'Americium', number: 95, mass: 243 }, 'cm': { name: 'Curium', number: 96, mass: 247 },
            'bk': { name: 'Berkelium', number: 97, mass: 247 }, 'cf': { name: 'Californium', number: 98, mass: 251 },
            'es': { name: 'Einsteinium', number: 99, mass: 252 }, 'fm': { name: 'Fermium', number: 100, mass: 257 },
            'md': { name: 'Mendelevium', number: 101, mass: 258 }, 'no': { name: 'Nobelium', number: 102, mass: 259 },
            'lr': { name: 'Lawrencium', number: 103, mass: 262 }, 'rf': { name: 'Rutherfordium', number: 104, mass: 267 },
            'db': { name: 'Dubnium', number: 105, mass: 268 }, 'sg': { name: 'Seaborgium', number: 106, mass: 271 },
            'bh': { name: 'Bohrium', number: 107, mass: 272 }, 'hs': { name: 'Hassium', number: 108, mass: 270 },
            'mt': { name: 'Meitnerium', number: 109, mass: 276 }, 'ds': { name: 'Darmstadtium', number: 110, mass: 281 },
            'rg': { name: 'Roentgenium', number: 111, mass: 280 }, 'cn': { name: 'Copernicium', number: 112, mass: 285 },
            'nh': { name: 'Nihonium', number: 113, mass: 284 }, 'fl': { name: 'Flerovium', number: 114, mass: 289 },
            'mc': { name: 'Moscovium', number: 115, mass: 288 }, 'lv': { name: 'Livermorium', number: 116, mass: 293 },
            'ts': { name: 'Tennessine', number: 117, mass: 294 }, 'og': { name: 'Oganesson', number: 118, mass: 294 },

            // Add some common single-letter symbols if not already covered by two-letter priority
            // These would only be matched if a two-letter combo isn't found
            'a': { name: 'Alpha', number: 'α', mass: '•' }, // Placeholder for 'A'
            'l': { name: 'Lepton', number: 'ℓ', mass: '•' } // Placeholder for 'L'
        };
        
        function generatePeriodicName() {
            const nameInput = document.getElementById('name-input').value; // Keep case for fallback
            const nameDisplay = document.getElementById('name-display');
            nameDisplay.innerHTML = '';

            const lines = nameInput.split('/');
            let maxElementsOnLine = 0;

            // Pre-calculate the number of elements on each line
            lines.forEach(line => {
                let i = 0;
                let elementCount = 0;
                const lineLower = line.toLowerCase();
                while (i < line.length) {
                    if (i + 1 < line.length && periodicTable[lineLower.substring(i, i + 2)]) {
                        i += 2;
                    } else {
                        i += 1;
                    }
                    elementCount++;
                }
                if (elementCount > maxElementsOnLine) {
                    maxElementsOnLine = elementCount;
                }
            });

            // --- SIZING ---
            // Start scaling down after 6 elements, with a minimum size of 40%
            const scaleFactor = Math.max(0.4, 1 - (maxElementsOnLine - 6) * 0.1);
            const baseSize = 100; // The original size of the element box
            const elementSize = baseSize * scaleFactor;

            const neonColors = ['#FFC107', '#3F51B5', '#9C27B0', '#F44336', '#4CAF50', '#FF9800', '#00BCD4', '#607D8B'];
            let colorIndex = 0;

            lines.forEach((line, lineIndex) => {
                let i = 0;
                const lineLower = line.toLowerCase();
                while (i < line.length) {
                    let symbol = '';
                    let elementData = null;

                    // Check for two-letter symbol first
                    if (i + 1 < line.length && periodicTable[lineLower.substring(i, i + 2)]) {
                        symbol = lineLower.substring(i, i + 2);
                        elementData = periodicTable[symbol];
                        i += 2;
                    } else if (periodicTable[lineLower.substring(i, i + 1)]) { // Check for one-letter symbol
                        symbol = lineLower.substring(i, i + 1);
                        elementData = periodicTable[symbol];
                        i += 1;
                    } else {
                        // If no match, use the original character
                        symbol = line.substring(i, i + 1);
                        i += 1;
                    }
                    
                    const elementDiv = document.createElement('div');
                    elementDiv.classList.add('element');
                    
                    // Apply dynamic size
                    elementDiv.style.width = `${elementSize}px`;
                    elementDiv.style.height = `${elementSize}px`;

                    const color = neonColors[colorIndex % neonColors.length];
                    colorIndex++;
                    elementDiv.style.backgroundColor = color;

                    if (elementData) {
                        const topRowDiv = document.createElement('div');
                        topRowDiv.classList.add('element-top-row');

                        const atomicNumberSpan = document.createElement('div');
                        atomicNumberSpan.classList.add('atomic-number');
                        atomicNumberSpan.textContent = elementData.number;
                        atomicNumberSpan.style.fontSize = `${16 * scaleFactor}px`;
                        topRowDiv.appendChild(atomicNumberSpan);

                        const massNumberSpan = document.createElement('div');
                        massNumberSpan.classList.add('mass-number');
                        massNumberSpan.textContent = Math.round(elementData.mass);
                        massNumberSpan.style.fontSize = `${16 * scaleFactor}px`;
                        topRowDiv.appendChild(massNumberSpan);

                        elementDiv.appendChild(topRowDiv);

                        const symbolSpan = document.createElement('div');
                        symbolSpan.classList.add('symbol');
                        symbolSpan.textContent = symbol.charAt(0).toUpperCase() + symbol.slice(1);
                        symbolSpan.style.fontSize = `${40 * scaleFactor}px`; // Slightly smaller symbol to guarantee fit
                        elementDiv.appendChild(symbolSpan);
                        
                        const nameSpan = document.createElement('div');
                        nameSpan.classList.add('element-name');
                        nameSpan.textContent = elementData.name;
                        nameSpan.style.fontSize = `${12 * scaleFactor}px`; // Slightly smaller name to guarantee fit
                        elementDiv.appendChild(nameSpan);
                    } else { // Fallback for letters not in the periodic table
                        const symbolSpan = document.createElement('div');
                        symbolSpan.classList.add('symbol');
                        symbolSpan.textContent = symbol; // Keep original case
                        symbolSpan.style.fontSize = `${48 * scaleFactor}px`;
                        // Center fallback text vertically
                        symbolSpan.style.lineHeight = `${elementSize}px`;
                        elementDiv.appendChild(symbolSpan);
                    }
                    
                    nameDisplay.appendChild(elementDiv);
                }

                // Add line break element if it's not the last line
                if (lineIndex < lines.length - 1) {
                    const lineBreak = document.createElement('div');
                    lineBreak.style.width = '100%';
                    lineBreak.style.height = '0';
                    nameDisplay.appendChild(lineBreak);
                }
            });
        }
    </script>

</body>
</html>